<!--
@license
Copyright (c) 2016 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/paper-card/paper-card.html">
<link rel="import" href="../../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../../../bower_components/iron-selector/iron-selector.html">
<link rel="import" href="../../../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../../../bower_components/app-route/app-location.html">
<link rel="import" href="../../../bower_components/app-route/app-route.html">
<link rel="import" href="../../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../components/youtube-search.html">
<link rel="import" href="../../components/youtube-toolbar.html">
<link rel="import" href="../../../bower_components/app-layout/app-scroll-effects/app-scroll-effects.html">
<link rel="import" href="../../../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../../../bower_components/app-layout/app-header-layout/app-header-layout.html">
<dom-module id="page-search">
  <template>
    <style>
      :host {
        --app-primary-color: rgb(207, 29, 23);
        --app-secondary-color: black;
        --app-third-color: rgb(66, 133, 244);
        @apply --layout-horizontal;
        @apply --layout-center-center;
        @apply --layout-wrap;
      }

      a {
        color: black;
        text-decoration: none;
      }

      .card-content {
        height: 50px;
        background-color: #04040452;
        width: 100%;
        text-overflow: ellipsis;
        margin-bottom: 10px;
        box-shadow: 1px 3px 6px grey;
      }

      .contentView {
        z-index: 1;
        font-style: italic;
        flex-grow: 7;
        font-size: 14px;
        /* background-color: #71a17b; */
        color: #b77b7b;
        margin-right: 3px;
        font-weight: bolder;
      }

      .channelView {
        z-index: 1;
        font-style: italic;
        flex-grow: 7;
        font-size: 14px;
        color: #7b1e1e;
        margin-right: 3px;
        font-weight: bolder;
      }

      .channelViewTitle {
        font-size: 13px;
        color: #4c6e92;
        font-weight: bolder;
      }

      section {
        padding-top: 1px;
      }

      .nav {
        width: 100%;
        /* height: 100px; */
        /* background-color: gray; */
        /* position: absolute; */
        /* bottom: 0%; */
      }

      .channelView {
        z-index: 1;
        font-style: italic;
        flex-grow: 7;
        font-size: 14px;
        color: #7b1e1e;
        margin-right: 3px;
        margin-bottom: 13px;
        font-weight: bolder;
      }

      .channelViewTitle {
        font-size: 13px;
        color: #4c6e92;
        font-weight: bolder;
      }

      app-header {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 212px;
        color: #fff;
        background-color: #3f51b5;
        /* https://bugs.chromium.org/p/chromium/issues/detail?id=637072 */
        --app-header-background-front-layer: {
          background-image: url(https://app-layout-assets.appspot.com/assets/bg1.jpg);
          background-position: left center;
        }
        ;
      }

      paper-icon-button {
        --paper-icon-button-ink-color: white;
      }

      app-toolbar.tall {
        height: 148px;
      }

      app-toolbar {
        color: var(--app-third-color);
        background-color: var(--app-primary-color);
        font-size: 2em;
        text-shadow: 1px 1px 0px yellow;
      }

      .content {
        margin: 2px 33px 0px;
        padding: 32px 32px 60px;
        background-color: #fff;
        color: #333;
        box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14);
      }

      /* mobile layout */

      @media (max-width: 600px) {

        .content {
          margin: 2px 0 0 0;
          box-shadow: none;
        }

        paper-fab {
          top: 290px;
          right: 16px;
        }

      }

      app-header {
        position: relative;
        top: 0;
        left: 0;
        /* width: 100%; */
      } 
    </style>    
    <app-route route="{{route}}" pattern="/:page" data="{{data}}" tail="{{routeTail}}" query-params="{{query}}">
    </app-route>
    <app-route route="{{route}}" pattern="youtube/search/:local" data="{{searchData}}" tail="{{searchTail}}" query-params="{{searchQuery}}">
    </app-route>
    <app-header condenses reveals effects="waterfall resize-title blend-background parallax-background">
      <app-toolbar>
        <paper-icon-button icon="menu"></paper-icon-button>
        <h4 condensed-title>Youtube Search &mdash; Environment</h4>
        <paper-icon-button icon="search"></paper-icon-button>
      </app-toolbar>
      <app-toolbar class="tall">
        <h1 main-title>Youtube Search</h1>
      </app-toolbar>
    </app-header>

    <div class="content">
      <iron-selector selected="[[routeTail.prefix]]" attr-for-selected="name" class="drawer-list" role="navigation">
        <template is="dom-repeat" items="{{items}}" as="video">
          <a name="/youtube/search/" href="/youtube/video/{{video.id}}">
            <paper-card class="nav" image="{{video.thumbnail}}">
            </paper-card>
          </a>
          <div class="card-content" title="{{video.title}}">
            <span class="contentView"> {{video.shortTitle}} </span>
            <a name="/youtube/search/" href="/youtube/search/channel?api=search&q={{video.channelId}}">
              <div class="channelView">
                <b>Chanel:</b>
                <button class="channelViewTitle">{{video.channelTitle}} </button>
              </div>
            </a>
          </div>
        </template>
      </iron-selector>
    </div>

  </template>
  <script>
    class pageSearch extends Polymer.Element {
      static get is() {
        return 'page-search';
      }

      constructor() {
        super();
      }

      static get properties() {
        return {
          page: {
            type: String,
            reflectToAttribute: true,
            //observer: '_pageChanged',
            notify: true
          }, 
          local: {
            type: String,
            reflectToAttribute: true,
            //observer: '_pageChanged',
            notify: true
          },
          route: {
            type: Object,
            notify: true
          },
          data: {
            type: Object,
            notify: true
          },
          routeTail: {
            type: Object,
            notify: true
          },
          query: {
            type: Object,
            // observer: 'log'
          },
          searchData: {
            type: Object,
            notify: true
          },
          searchTail: {
            type: Object,
            notify: true
          },
          searchQuery: {
            type: Object,
            // observer: 'log'
          },
          items: {
            type: Array,
            obsever: '_seethisshit'
          },
          channel: {
            type: Object,
            value: function () {
              return {
                method: "channel",
                api: "search",
                type: "video"
              }
            }
          },
          list: {
            type: Object,
            value: function () {
              return {
                method: "search",
                api: "search",
                type: "video"
              }
            }
          }
        }
      }
      static get observers() {
        return [
          '_routePageChanged(data.page)',
        ];
      }
      _routePageChanged() {
        this.local = this.searchData.local
      }      
      _seethisshit() {
        window.scrollTo(0)
        this.items.map(data => {
        })
      }
    }
    window.customElements.define(pageSearch.is, pageSearch);
  </script>
</dom-module>